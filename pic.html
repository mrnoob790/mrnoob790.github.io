<!DOCTYPE html>
<html>
  <body>
    <h3>Sandboxed iframe with upload & redirect</h3>
    <iframe
      sandbox
      srcdoc="
<html>
<head>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<style>
    h1 { margin: 1em; }
    a { position: absolute; top: 0; left: 0; right: 0; bottom: 0; }
    input { display: none; }
    img { width: 100%; }
</style>
</head>
<body>
<h1>Tap to upload photo to Google</h1>
<input id='fileSelect' type='file' accept='image/*'>
<img id='preview' style='max-width: 100%; margin-top: 20px;'>
<a id='link' target='_blank'></a>
<script>
    link.onclick = () => {
        showOpenFilePicker().then(([fileHandle]) => {
            fileHandle.getFile().then((file) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('preview').src = e.target.result;
                };
                reader.readAsDataURL(file);
            });
        });
        open('https://www.google.com');
    };
    fileSelect.onchange = (event) => {
        img.src = URL.createObjectURL(fileSelect.files[0]);
    };
</script>
</body>
</html>
      "
      width="400"
      height="300">
    </iframe>
  </body>
</html>
