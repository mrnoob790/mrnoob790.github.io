<body>
<h1>Click anywhere</h1>
<script>


  in_then_getter = false;
  Array.prototype.__defineGetter__('then', function () {
    if (in_then_getter)
      return;
    navigator.usb.requestDevice({filters: [{}]});
    in_then_getter = true;
    navigator.usb.getDevices();
    in_then_getter = false;
  });
  navigator.usb.getDevices();

</script>
</body>